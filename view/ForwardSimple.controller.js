/*
 * Copyright (C) 2009-2018 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.require("sap.ca.ui.utils.resourcebundle");jQuery.sap.require("cross.fnd.fiori.inbox.util.ConfirmationDialogManager");jQuery.sap.require("cross.fnd.fiori.inbox.util.EmployeeCard");sap.ui.controller("cross.fnd.fiori.inbox.view.ForwardSimple",{_FORWARD_DIALOG_ID:"DLG_FORWARD_SIMPLE",_FORWARDER_ITEM_ID:"ITM_AGENT",_TARGET_USER:"IFD_TARGET_USER",_NOTE:"confirmDialogTextarea",fnForward:null,onInit:function(){this.getView().setModel(sap.ca.scfld.md.app.Application.getImpl().AppI18nModel,"i18n");if(sap.ui.Device.system.phone){var d=this.getView().byId(this._FORWARD_DIALOG_ID);d.setStretch(true);}},onCancel:function(){var f=this.getView().byId(this._FORWARD_DIALOG_ID);f.close();},onForward:function(){var f=this.getView().byId(this._FORWARD_DIALOG_ID);var d=f.getModel();if(d){this.fnForward=d.getProperty("/closeDlg");}var F=this.getView().byId(this._TARGET_USER);var u=F.getValue();if(!u||u==""){F.setValueState(sap.ui.core.ValueState.Error);var e=sap.ca.scfld.md.app.Application.getImpl().getComponent().oDataManager.oi18nResourceBundle.getText("XMSG_FORWARD_USER_ID_MANDATORY");F.setValueStateText(e);F.focus();return;}else{F.setValueState(sap.ui.core.ValueState.None);F.setValueStateText("");}var o=this.getView().byId(this._NOTE);var n=o.getValue();this.getView().byId(this._FORWARD_DIALOG_ID).close();var a={UniqueName:u,DisplayName:u};var N={bConfirmed:true,sNote:n,oAgentToBeForwarded:a};this.fnForward(N);},onBeforeOpenDialog:function(){var f=this.getView().byId(this._TARGET_USER);var F=this.getView().byId(this._FORWARD_DIALOG_ID);F.setInitialFocus(f);f.setValue("");f.setValueState(sap.ui.core.ValueState.None);f.setValueStateText("");var o=this.getView().byId(this._NOTE);o.setValue("");this.fnForward=null;var d=F.getModel();if(d){this.fnForward=d.getProperty("/closeDlg");}}});
